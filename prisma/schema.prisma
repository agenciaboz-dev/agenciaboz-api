generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "mysql"
    url      = env("DATABASE_URL")
}

model contracts {
    id          Int      @id @default(autoincrement())
    unit        String   @unique(map: "unit")
    date        DateTime @db.Date
    ip          String
    pessoa      String   
    supplier    String  
    name        String  
    email       String  
    phone       String  
    address     String  
    cep         String  
    cnpj        String? 
    company     String? 
    category    String? 
    cpf         String? 
    rg          String? 
    seller      users    @relation(fields: [seller_id], references: [id])
    seller_id   Int      
    rdstation   rdstation?
    financial   financial?
    logs        logs[]
}

model emails {
    id    Int     @id @default(autoincrement())
    email String?
}

model users {
    id            Int       @id @default(autoincrement())
    username      String    @unique
    email         String    @unique
    password      String
    name          String 
    cpf           String    @default("02576698506")
    adm           Boolean   @default(false)
    ip            String    @default("0.0.0.0")
    contracts     contracts[]
    logs          logs[]
}

model financial {
    id          Int         @id @default(autoincrement())
    name        String 
    phone       String 
    email       String  
    contract    contracts   @relation(fields: [contract_id], references: [id])
    contract_id Int         @unique
}

model rdstation {
    id          String      @unique
    state       Int         @default(1)
    contract    contracts   @relation(fields: [contract_id], references: [id])
    contract_id Int         @unique
}

model logs {
    id              Int         @id @default(autoincrement())
    date            DateTime    @default(now())
    text            String
    contract        contracts   @relation(fields: [contract_id], references: [id])
    contract_id     Int         @unique  
    seller          users       @relation(fields: [seller_id], references: [id])
    seller_id       Int         @unique
}